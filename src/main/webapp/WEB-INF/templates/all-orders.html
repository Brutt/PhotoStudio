<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <title>Orders Journal</title>
    <meta th:replace="fragment/head.html :: meta">
    <link th:replace="fragment/head.html :: link">
    <link rel="stylesheet" type="text/css" href="assets/css/all-orders.css">
</head>

<body>
<div class="container orders">

    <!--Bread Crumb-->
    <div th:if="${user.userRole.getName()=='ADMIN'}" class="bread__crumb-navigation">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="admin">Admin page</a></li>
                <img class="bread__crumb-arrow" src="assets/images/Arrow.jpg" alt="arrow">
                <li class="breadcrumb-item active" aria-current="page">Order journal</li>
            </ol>
        </nav>
    </div>
    <!--Bread Crumb End-->

    <h1 class="orders__title">Orders</h1>
    <div th:if="${user.userRole.getName()=='ADMIN'}" class="order__header">
        <div class="order-btn">
            <a value="Show/Hide" onClick="showHideFilterTable('filterTable')"
               class="btn btn-submit btn-outline-dark button order-btn_right">Filter</a>
            <a th:href="@{/order}"
               class="btn btn-submit btn-outline-dark button order-btn_left">New order</a>
        </div>
    </div>

    <div th:if="${user.userRole.getName()=='ADMIN'}" class="order-board" id="filterTable" style="display:none">
        <div id="parameters">
            <div class="order-board_content ">
                <div class="form-row ">
                    <div class="form-group col-md-6 order-filter-group">
                        <label for="inputDateFrom">From</label>
                        <input type="date" class="data-field form-control select-selected" id="inputDateFrom"
                               placeholder="Search by from Date" name="filterFromDate">
                    </div>
                    <div class="form-group col-md-6 order-filter-group">
                        <label for="inputDateTo">To</label>
                        <input type="date" class="data-field form-control select-selected" id="inputDateTo"
                               placeholder="Search by to Date" name="filterToDate">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6 order-filter-group">
                        <label for="inputEmail">Email</label>
                        <input type="email" class="form-control select-selected" id="inputEmail" placeholder="email"
                               name="filterEmail">
                    </div>
                    <div class="form-group col-md-6 order-filter-group">
                        <label for="inputPhoneNumber">Phone</label>
                        <input type="tel" pattern="[1-9][0-9]{0,3} [0-9]{3} [0-9]{3} [0-9]{2} [0-9]{2}"
                               placeholder="49 XXX XXX XX XX" class="form-control select-selected" id="inputPhoneNumber"
                               name="filterPhoneNumber">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6 order-filter-group">
                        <label for="inputState">State</label>
                        <select id="inputState" name="filterOrderStatus" class="form-control">
                            <option selected></option>
                            <option>New</option>
                            <option>View and Select</option>
                            <option>Selected</option>
                            <option>Ready</option>
                        </select>
                    </div>
                </div>

                <div class="form-group orders-board-btn_apply ">
                    <a href="#" onclick="parameterize()" id="add_parameters"
                       class="btn btn-submit btn-outline-dark button">Apply</a>
                </div>
            </div>
        </div>
    </div>

    <table class="table table-hover table__rounded">
        <tbody>
        <tr id="new-page" class="table_header">
            <td class="table_header">Number</td>
            <td class="table_header">Date</td>
            <td class="table_header">Status</td>
            <td th:if="${user.userRole.getName()=='ADMIN'}" class="table_header">User(Email/Phone)</td>
        </tr>
        <div th:each="order : ${orders}">
            <tr class="table_info double-click" th:id="'order/' + ${order.id}">
                <td class="table_info" th:text="${order.id}"></td>
                <td class="table_info" th:text="${#temporals.format(order.orderDate,'dd-MM-yyyy HH:mm')}"></td>
                <td class="table_info" th:text="${order.status}"></td>
                <td th:if="${user.userRole.getName()=='ADMIN'}" class="table_info">
                    <div th:if="${order.user.phoneNumber == null}" th:text="${order.user.email}"></div>
                    <div th:if="${order.user.phoneNumber != null}"
                         th:text="${order.user.email} + '/' +${order.user.phoneNumber}"></div>
                </td>
            </tr>
        </div>
        </tbody>
    </table>

</div>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
<script src="assets/js/order/orders.js"></script>
<script src="assets/js/page/all-orders.js"></script>
<script src="assets/js/order/get-order-by-id.js"></script>
</body>
</html>


